<!-- Generated by Heapkeeper v0.4 on 2010-04-10 13:44:41 -->
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
    <title>Thread hh/748</title>
    <link rel=stylesheet href="../heapindex.css" type="text/css">
  </head>
  <body>
    <h1 id="header">Thread hh/748</h1>


<div class="postbox"><!-- post hh/748 -->
<span class="postsummary" id="post_hh/748">
<span class="author">Csaba Hoch</span>
<span class="subject">Convention about expected/real result</span>
<span class="tags">[prop, reviewed]</span>
<span class="index"><a href="../hh/thread_748.html#post_hh/748">&lt;hh/748&gt;</a></span>
<span class="parent">&lt;root&gt;</span>
<span class="date">(2009-10-22)</span>
<div class="body">
<pre class="postbody">I think we should have a convention about whether the expected or real
result should be written first in the assertions. I'll discuss the two
possible conventions and than describe my idea.

== Real result first ==

Usually I have been following the "real result first" convention,
which reads nice when you read the _test code_:

    self.assertTextStructsAreEqual(
        g.print_post_summary_div(postitem)
        g.enclose(
            class_='postsummary',
            id='post_0',
            newlines=True,
            content=expected_header))

It reads like this: if I execute the `print_post_summary_div`
function, the result should be an enclosed structure where the class
is "postsummary", the id is "post_0", the new lines are enabled and
the content is the same as the previously created `expected_header`
text.

== Expected result first ==

On the other hand, if we read the _test results_ instead of the test
code, the "expected result first" seems to be better:

The test code:

    self.assertTextStructsAreEqual(
        g.enclose(
            class_='postsummary',
            id='post_0',
            newlines=True,
            content=expected_header)),
        g.print_post_summary_div(postitem)

The test result:

    AssertionError: The following strings should be equal but they are not:

    -&lt;span class="postsummary" id="post_0"&gt;
    +&lt;span class="postsummary" id="post_0"&gt;&lt;!-- post 0 --&gt;
     &lt;span class="author"&gt;author0&lt;/span&gt;
     &lt;span class="subject"&gt;subject0&lt;/span&gt;
     &lt;span class="button"&gt;&lt;a href="thread_0.html"&gt;&lt;img src="thread.png" /&gt;&lt;/a&gt;&lt;/span&gt;
     &lt;span class="tags"&gt;[tag1, tag2]&lt;/span&gt;
     &lt;span class="index"&gt;&lt;a href="thread_0.html#post_0"&gt;&amp;lt;0&amp;gt;&lt;/a&gt;&lt;/span&gt;
    -&lt;/span&gt;
    +&lt;/span&gt;&lt;!-- post 0 --&gt;&lt;!-- postsummary --&gt;

The test result reads nicely because it says "the real result has
extra comments compared to the expected result".

The order does not really have a significance when reading non-diff
test results:

    AssertionError: ['a', 'b'] != ['a']

== Idea ==

I have an idea to have the best of the two worlds. We should write the
real results first, the unittest module should do the "diff" in the
other way around!

This way the test code would look like this:

    self.assertEquals(
        real,
        expected)

The normal test results would look like this:

    AssertionError: real != expected

The diff test results would look like this:

    AssertionError: The following strings should be equal but they are not:

    -expected
    +real
</pre></div>
</span><!-- postsummary -->

<div class="postbox"><!-- post hh/794 -->
<span class="postsummary" id="post_hh/794">
<span class="author">Attila Nagy</span>
<span class="subject"><span class="star">&mdash;</span></span>
<span class="index"><a href="../hh/thread_748.html#post_hh/794">&lt;hh/794&gt;</a></span>
<span class="parent"><a href="../hh/thread_748.html#post_hh/748">&lt;&uarr;hh/748&gt;</a></span>
<span class="date">(2009-10-29)</span>
<div class="body">
<pre class="postbody"><span class="quote"><span class="quote-1">&gt; This way the test code would look like this:
&gt;
&gt;    self.assertEquals(
&gt;        real,
&gt;        expected)

</span></span>OK.
</pre></div>
</span><!-- postsummary -->

<div class="postbox"><!-- post hh/820 -->
<span class="postsummary" id="post_hh/820">
<span class="author">Csaba Hoch</span>
<span class="subject"><span class="star">&mdash;</span></span>
<span class="index"><a href="../hh/thread_748.html#post_hh/820">&lt;hh/820&gt;</a></span>
<span class="parent"><a href="../hh/thread_748.html#post_hh/794">&lt;&uarr;hh/794&gt;</a></span>
<span class="date">(2009-10-31)</span>
<div class="body">
<pre class="postbody"><span class="meta-text">[close]</span>
</pre></div>
</span><!-- postsummary -->
</div><!-- postbox for post hh/820 -->
</div><!-- postbox for post hh/794 -->
</div><!-- postbox for post hh/748 -->

  </body>
</html>
