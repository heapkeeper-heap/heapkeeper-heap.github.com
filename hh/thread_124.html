<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
    <title>Thread hh/124</title>
    <link rel=stylesheet href="../heapindex.css" type="text/css">
  </head>
  <body>
    <h1 id="header">Thread hh/124</h1>


<div class="postbox"><!-- post hh/124 -->
<span class="postsummary" id="post_hh/124">
<span class="author">Csaba Hoch</span>
<span class="subject">__repr__ function (2009-04-19 f9b1451718)</span>
<span class="tags">[commit, reviewed]</span>
<span class="index"><a href="../hh/thread_124.html#post_hh/124">&lt;hh/124&gt;</a></span>
<span class="parent">&lt;root&gt;</span>
<span class="date">(2009-04-23)</span>
<div class="body">
<pre class="postbody">Diff:

    @@ -521,6 +521,9 @@ class Post(object):
             else:
                 return False

    +    def __repr__(self):
    +        return self._heapid
    +
         # Misc

         def remove_google_stuff(self):

From the Python documentation of the Python Data Model [1]:

    object.__repr__(self)

        Called by the repr() built-in function and by string
        conversions (reverse quotes) to compute the “official” string
        representation of an object. If at all possible, this should
        look like a valid Python expression that could be used to
        recreate an object with the same value (given an appropriate
        environment). If this is not possible, a string of the form
        &lt;...some useful description...&gt; should be returned. The return
        value must be a string object. If a class defines __repr__()
        but not __str__(), then __repr__() is also used when an
        “informal” string representation of instances of that class is
        required.

        This is typically used for debugging, so it is important that
        the representation is information-rich and unambiguous.

    object.__str__(self)

        Called by the str() built-in function and by the print
        statement to compute the “informal” string representation of
        an object. This differs from __repr__() in that it does not
        have to be a valid Python expression: a more convenient or
        concise representation may be used instead. The return value
        must be a string object.

For example:

    &gt;&gt;&gt; repr(lambda x: None)
    '&lt;function &lt;lambda&gt; at 0xb7d62374&gt;'

I think this would be a nice repr function:

    def __repr__(self):
        return '&lt;post with heapid %s&gt;' % (self._heapid,)

I see that it would be more convenient for us if it was shorter,
but this verbosity is very helpful for our future users and not that
inconvenient for us.

[1] <a href="http://docs.python.org/reference/datamodel.html">http://docs.python.org/reference/datamodel.html</a>
</pre></div>
</span><!-- postsummary -->

<div class="postbox"><!-- post hh/125 -->
<span class="postsummary" id="post_hh/125">
<span class="author">Attila Nagy</span>
<span class="subject"><span class="star">&mdash;</span></span>
<span class="index"><a href="../hh/thread_124.html#post_hh/125">&lt;hh/125&gt;</a></span>
<span class="parent"><a href="../hh/thread_124.html#post_hh/124">&lt;&uarr;hh/124&gt;</a></span>
<span class="date">(2009-04-27)</span>
<div class="body">
<pre class="postbody"><span class="quote"><span class="quote-1">&gt; I see that it would be more convenient for us if it was shorter,
&gt; but this verbosity is very helpful for our future users and not that
&gt; inconvenient for us.

</span></span>Yes, the way it is solved right now is far from perfect. I ran into
this just now:

    &gt;&gt;&gt; postdb().roots()[0]
    183

Not exactly the expected answer. How about:

    &gt;&gt;&gt; postdb().roots()[0]
    &lt;post '183'&gt;

I'll change the __repr__ to return this.
</pre></div>
</span><!-- postsummary -->

<div class="postbox"><!-- post hh/126 -->
<span class="postsummary" id="post_hh/126">
<span class="author">Csaba Hoch</span>
<span class="subject"><span class="star">&mdash;</span></span>
<span class="index"><a href="../hh/thread_124.html#post_hh/126">&lt;hh/126&gt;</a></span>
<span class="parent"><a href="../hh/thread_124.html#post_hh/125">&lt;&uarr;hh/125&gt;</a></span>
<span class="date">(2009-04-27)</span>
<div class="body">
<pre class="postbody">OK.
</pre></div>
</span><!-- postsummary -->
</div><!-- postbox for post hh/126 -->
</div><!-- postbox for post hh/125 -->
</div><!-- postbox for post hh/124 -->

  </body>
</html>
