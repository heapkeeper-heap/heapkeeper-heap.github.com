<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <title>Nice work, elif, same commits (2009-05-07 3b4f6d3677, 179f5cf18e, 4e32bdad1c)</title>
    <link rel="stylesheet" href="../heapindex.css" type="text/css" />
  </head>
  <body >
    <h1 id="header">Nice work, elif, same commits (2009-05-07 3b4f6d3677, 179f5cf18e, 4e32bdad1c)</h1>


<div class="post-box"><!-- post hh/172 -->
<div class="post-summary" id="post-summary-hh-172">
<span class="author">Csaba Hoch</span>
<span class="subject">Nice work, elif, same commits (2009-05-07 3b4f6d3677, 179f5cf18e, 4e32bdad1c)</span>
<span class="tags">[commit, reviewed]</span>
<span class="index"><a href="../hh/thread_172.html#post-summary-hh-172">&lt;hh/172&gt;</a></span>
<span class="date">(2009-05-07)</span>
<span class="container-button post-summary-button">Children: <a href="../hh/thread_172.html#post-summary-hh-173">hh/173</a>, <a href="../hh/thread_172.html#post-summary-hh-187">hh/187</a></span>
<pre class="post-body-content">I had a brief look at the commits. I have to say, it is very nice job!
I hope I can dig deeper into it in the weekend. I will fix the test
cases if you say so.

== elif ==

A small comment though: there is an "elif" statement in Python. So
please do not write

<span class="raw-block">    if a:
        b
    else:
        if c:
            d
        else:
            e
</span>
but write

<span class="raw-block">    if a:
        b
    elif c:
        d
    else:
        e
</span>
instead.

== Same commits ==

What happened to 179f5cf18e and 4e32bdad1c, why do they both seem the
same? Have you used "git amend" after push, or was it something else?
It is not a problem, I'm just curious :)
</pre></div><!-- post-summary -->

<div class="post-box"><!-- post hh/173 -->
<div class="post-summary" id="post-summary-hh-173">
<span class="author">Attila Nagy</span>
<span class="subject"><span class="star">&mdash;</span></span>
<span class="index"><a href="../hh/thread_172.html#post-summary-hh-173">&lt;hh/173&gt;</a></span>
<span class="date">(2009-05-07)</span>
<span class="container-button post-summary-button">Parent: <a href="../hh/thread_172.html#post-summary-hh-172">hh/172</a></span>
<span class="container-button post-summary-button">Children: <a href="../hh/thread_172.html#post-summary-hh-181">hh/181</a></span>
<pre class="post-body-content">Hey! I just wanted to write a mail to announce my branch; then I found
something, so I send it out first, and when I look at inbox, you've
already commented. That's what I call response time :)

<span class="quote"><span class="quote-1">&gt; I had a brief look at the commits. I have to say, it is very nice job!
</span></span>
Thanks! :)

<span class="quote"><span class="quote-1">&gt; I hope I can dig deeper into it in the weekend. I will fix the test
&gt; cases if you say so.
</span></span>
I've tried to take care of them, but please double-check me.

<span class="quote"><span class="quote-1">&gt; == elif ==
</span></span>
OK.

<span class="quote"><span class="quote-1">&gt; What happened to 179f5cf18e and 4e32bdad1c, why do they both seem the
&gt; same? Have you used "git amend" after push, or was it something else?
</span></span>
Yes, I've used "git amend".
</pre></div><!-- post-summary -->

<div class="post-box"><!-- post hh/181 -->
<div class="post-summary" id="post-summary-hh-181">
<span class="author">Attila Nagy</span>
<span class="subject">amend + merge =chaos (2009-05-07 3b4f6d3677, 179f5cf18e, 4e32bdad1c)</span>
<span class="index"><a href="../hh/thread_172.html#post-summary-hh-181">&lt;hh/181&gt;</a></span>
<span class="date">(2009-05-08)</span>
<span class="container-button post-summary-button">Parent: <a href="../hh/thread_172.html#post-summary-hh-173">hh/173</a></span>
<span class="container-button post-summary-button">Children: <a href="../hh/thread_172.html#post-summary-hh-182">hh/182</a></span>
<pre class="post-body-content"><span class="quote"><span class="quote-2">&gt;&gt; What happened to 179f5cf18e and 4e32bdad1c, why do they both seem the
&gt;&gt; same? Have you used "git amend" after push, or was it something else?
</span></span>
<span class="quote"><span class="quote-1">&gt; Yes, I've used "git amend".
</span></span>
And it seems that I also merged two repos, one amended, the other not.
At least that's what I think I did.

Is there any way we can clean up this mess?
</pre></div><!-- post-summary -->

<div class="post-box"><!-- post hh/182 -->
<div class="post-summary" id="post-summary-hh-182">
<span class="author">Csaba Hoch</span>
<span class="subject"><span class="star">&mdash;</span></span>
<span class="index"><a href="../hh/thread_172.html#post-summary-hh-182">&lt;hh/182&gt;</a></span>
<span class="date">(2009-05-08)</span>
<span class="container-button post-summary-button">Parent: <a href="../hh/thread_172.html#post-summary-hh-181">hh/181</a></span>
<span class="container-button post-summary-button">Children: -</span>
<pre class="post-body-content"><span class="quote"><span class="quote-1">&gt; Is there any way we can clean up this mess?
</span></span>
I don't think so. This is history now :) Don't worry about it
(I don't).
</pre></div><!-- post-summary -->
</div><!-- postbox for post hh/182 -->
</div><!-- postbox for post hh/181 -->
</div><!-- postbox for post hh/173 -->

<div class="post-box"><!-- post hh/187 -->
<div class="post-summary" id="post-summary-hh-187">
<span class="author">Attila Nagy</span>
<span class="subject"><span class="star">&mdash;</span></span>
<span class="index"><a href="../hh/thread_172.html#post-summary-hh-187">&lt;hh/187&gt;</a></span>
<span class="date">(2009-05-09)</span>
<span class="container-button post-summary-button">Parent: <a href="../hh/thread_172.html#post-summary-hh-172">hh/172</a></span>
<span class="container-button post-summary-button">Children: <a href="../hh/thread_172.html#post-summary-hh-188">hh/188</a></span>
<pre class="post-body-content"><span class="quote"><span class="quote-1">&gt; == elif ==
&gt;
&gt; A small comment though: there is an "elif" statement in Python. So
&gt; please do not write
&gt;
</span></span><span class="quote"><span class="quote-1"><span class="raw-block">&gt;    if a:
&gt;        b
&gt;    else:
&gt;        if c:
&gt;            d
&gt;        else:
&gt;            e
</span></span></span>
Although git credits me with writing the code in question, I think it's a
mistake. I merely renamed that function, and git thinks it's all new.

I did a git blame in the master thread:
    cfac9c01 heapmanip.py (Csaba Hoch  1993)  if isinstance(item, str):
    cfac9c01 heapmanip.py (Csaba Hoch  1994)      strings.append(item)
    cfac9c01 heapmanip.py (Csaba Hoch  1995)
    cfac9c01 heapmanip.py (Csaba Hoch  1996)  else:
    cfac9c01 heapmanip.py (Csaba Hoch  1997)      if item != None:
    cfac9c01 heapmanip.py (Csaba Hoch  1998)          post = item

(I removed the date column; timestamp was "2009-02-18 23:43:07 +0100" for all
lines.
</pre></div><!-- post-summary -->

<div class="post-box"><!-- post hh/188 -->
<div class="post-summary" id="post-summary-hh-188">
<span class="author">Csaba Hoch</span>
<span class="subject"><span class="star">&mdash;</span></span>
<span class="index"><a href="../hh/thread_172.html#post-summary-hh-188">&lt;hh/188&gt;</a></span>
<span class="date">(2009-05-09)</span>
<span class="container-button post-summary-button">Parent: <a href="../hh/thread_172.html#post-summary-hh-187">hh/187</a></span>
<span class="container-button post-summary-button">Children: -</span>
<pre class="post-body-content"><span class="quote"><span class="quote-2">&gt;&gt; == elif ==
&gt;&gt;
&gt;&gt; A small comment though: there is an "elif" statement in Python. So
&gt;&gt; please do not write
&gt;&gt;
</span></span><span class="quote"><span class="quote-2"><span class="raw-block">&gt;&gt;    if a:
&gt;&gt;        b
&gt;&gt;    else:
&gt;&gt;        if c:
&gt;&gt;            d
&gt;&gt;        else:
&gt;&gt;            e
</span></span></span>
I'm sorry that I have not referred to the code in question, I'll do it
now. But first I'll explain why the code you found is that way it is.

== The code not in question ==

<span class="quote"><span class="quote-1">&gt; Although git credits me with writing the code in question, I think it's a
&gt; mistake. I merely renamed that function, and git thinks it's all new.
</span></span>
If you talk about the thread and summarize_thread functions, I think
you _copied_ and not _renamed_ it. But you are right -- I wrote those
else and if. But there is a reason for that; the mentioned code looks
like this:

<span class="raw-block">    if a:
        b
    else:
        if c:
            d
        else:
            e
        x # note this command
</span>
So it cannot be replaced by elifs easily.

== The code in question ==

This is the commit in question (179f5cf18e):

<span class="raw-block">    @@ -2092,10 +2120,13 @@ class Generator(object):
             date_str = options.date_fun(post, options)

             section = options.section
    -        if section.posts == CYCLES:
    +        if options.always_active:
                 active = True
             else:
    -            active = post in section.posts
    +            if section.posts == CYCLES:
    +                active = True
    +            else:
    +                active = post in section.posts

             if options.locallinks:
                 link = '#' + post.heapid()
</span>
That is the new version of the code that could be simplified with
elif (in Generator.post_summary):

<span class="raw-block">    section = options.section
    if options.always_active:
        active = True
    else:
        if section.posts == CYCLES:
            active = True
        else:
            active = post in section.posts
</span>
Or now that I have a look at it more closely, a simple if-else is
enough.
</pre></div><!-- post-summary -->
</div><!-- postbox for post hh/188 -->
</div><!-- postbox for post hh/187 -->
</div><!-- postbox for post hh/172 -->

  </body>
</html>
